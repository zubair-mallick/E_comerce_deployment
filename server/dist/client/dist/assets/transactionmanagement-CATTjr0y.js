import{n as E,H as T,w as k,a8 as A,a9 as D,aa as P,r as w,_ as l,j as s,O as H,m as L,L as M}from"./index-DKYrVGzK.js";import{A as F}from"./AdminSidebar-EGZZty9X.js";import{t as R,r as p}from"./features-B6z4mT7H.js";import"./index-DV1DV8uI.js";import"./index-DQEopMfT.js";const U={shippingInfo:{address:"",city:"",state:"",country:"",pincode:0},status:"",subtotal:0,discount:0,shippingCharges:0,tax:0,total:0,orderItems:[],user:{_id:"",name:""},_id:""},J=()=>{const{user:t}=E(e=>e.userReducer),d=T(),n=k(),{isLoading:a,data:r,isError:u,error:o}=A(d.id),{shippingInfo:{address:h,city:m,state:x,country:j,pincode:g},orderItems:f,user:{name:I},status:i,tax:_,subtotal:y,total:N,discount:O,shippingCharges:S}=(r==null?void 0:r.order)||U,[b]=D(),[C]=P(),$=async()=>{const e=await b({userId:t==null?void 0:t._id,orderId:r==null?void 0:r.order._id});p(e,n,"/admin/transaction")},v=async()=>{const e=await C({userId:t==null?void 0:t._id,orderId:r==null?void 0:r.order._id});p(e,n,"/admin/transaction")};return w.useEffect(()=>{if(u){const e=o.status;if(e===404||e===400){l.error("Product not found."),n("/404");return}const c=o.data.message;c&&l.error(c)}},[o,r]),s.jsxs("div",{className:"admin-container",children:[s.jsx(F,{}),s.jsx("main",{className:"product-management",children:a?s.jsx(H,{}):s.jsxs(s.Fragment,{children:[s.jsxs("section",{style:{padding:"2rem"},children:[s.jsx("h2",{children:"Order Items"}),f.map(e=>s.jsx(q,{name:e.name,photos:e.photos,productId:e.productId,_id:e._id,quantity:e.quantity,price:e.price},e._id))]}),s.jsxs("article",{className:"shipping-info-card",children:[s.jsx("button",{className:"product-delete-btn",onClick:v,children:s.jsx(L,{})}),s.jsx("h1",{children:"Order Info"}),s.jsx("h5",{children:"User Info"}),s.jsxs("p",{children:["Name: ",I]}),s.jsxs("p",{children:["Address: ",`${h}, ${m}, ${x}, ${j} ${g}`]}),s.jsx("h5",{children:"Amount Info"}),s.jsxs("p",{children:["Subtotal: ",y]}),s.jsxs("p",{children:["Shipping Charges: ",S]}),s.jsxs("p",{children:["Tax: ",_]}),s.jsxs("p",{children:["Discount: ",O]}),s.jsxs("p",{children:["Total: ",N]}),s.jsx("h5",{children:"Status Info"}),s.jsxs("p",{children:["Status:"," ",s.jsx("span",{className:i==="Delivered"?"purple":i==="Shipped"?"green":"red",children:i})]}),s.jsx("button",{className:"shipping-btn",onClick:$,children:"Process Status"})]})]})})]})},q=({name:t,photos:d,price:n,quantity:a,productId:r})=>s.jsxs("div",{className:"transaction-product-card",children:[s.jsx("img",{src:R(d[0]),alt:t}),s.jsx(M,{to:`/product/${r}`,children:t}),s.jsxs("span",{children:["₹",n," X ",a," = ₹",n*a]})]});export{J as default};
