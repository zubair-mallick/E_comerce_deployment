import{n as y,H as C,w as $,p as l,_ as u,r,j as e,O as S,ab as N,o as g}from"./index-CnNG6d7V.js";import{s as w}from"./index-C-Nwj5L5.js";import{A as _}from"./AdminSidebar-BypyIHby.js";import"./index-BwyhZKgd.js";import"./index-CT7zOLME.js";const k=()=>{const{user:t}=y(a=>a.userReducer),{id:s}=C(),m=$();console.log(s);const{loading:j,data:n,error:p}=w({url:`${l}/api/v1/payment/coupon/${s}?id=${t==null?void 0:t._id}`,dependencyProps:[]});p&&u.error(p);const[f,o]=r.useState(!1),[h,c]=r.useState(""),[x,d]=r.useState(0),b=async a=>{a.preventDefault(),o(!0);try{const{data:i}=await g.put(`${l}/api/v1/payment/coupon/${s}?id=${t==null?void 0:t._id}`,{code:h,amount:x},{headers:{"Content-Type":"application/json"},withCredentials:!0});i.success&&(d(0),c(""),u.success(i.message),m("/admin/discount"))}catch(i){console.log(i)}finally{o(!1)}};r.useEffect(()=>{n&&(c(n.coupon.code),d(n.coupon.amount))},[n]);const v=async()=>{o(!0);try{const{data:a}=await g.delete(`${l}/api/v1/payment/coupon/${s}?id=${t==null?void 0:t._id}`,{withCredentials:!0});a.success&&(u.success(a.message),m("/admin/discount"))}catch(a){console.log(a)}finally{o(!1)}};return e.jsxs("div",{className:"admin-container",children:[e.jsx(_,{}),e.jsx("main",{className:"product-management",children:j?e.jsx(S,{length:20}):e.jsx(e.Fragment,{children:e.jsxs("article",{children:[e.jsx("button",{className:"product-delete-btn",onClick:v,children:e.jsx(N,{})}),e.jsxs("form",{onSubmit:b,children:[e.jsx("h2",{children:"Manage"}),e.jsxs("div",{children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",placeholder:"Coupon Code",value:h,onChange:a=>c(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Price"}),e.jsx("input",{type:"number",placeholder:"Amount",value:x,onChange:a=>d(Number(a.target.value))})]}),e.jsx("button",{disabled:f,type:"submit",children:"Update"})]})]})})})]})};export{k as default};
