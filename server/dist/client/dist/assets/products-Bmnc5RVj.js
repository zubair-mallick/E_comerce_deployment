import{j as s,r as n,n as u,X as p,_ as i,L as m,k}from"./index-CnNG6d7V.js";import{A as N}from"./AdminSidebar-BypyIHby.js";import{T as b}from"./TableHOC-49fFBn5x.js";import"./index-BwyhZKgd.js";import"./index-CT7zOLME.js";const e=({className:t})=>s.jsxs("div",{"aria-live":"polite","aria-busy":"true",className:`skeleton ${t}`,children:[s.jsx("span",{className:"skeleton__pulse"}),s.jsx("br",{})]}),f=({className:t})=>s.jsx("svg",{className:`skeleton-svg ${t} animate-pulse`}),g=()=>s.jsx("div",{className:"product-table-skeleton",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:s.jsx(e,{className:"skeleton--th"})}),s.jsx("th",{children:s.jsx(e,{className:"skeleton--th"})}),s.jsx("th",{children:s.jsx(e,{className:"skeleton--th"})}),s.jsx("th",{children:s.jsx(e,{className:"skeleton--th"})}),s.jsx("th",{children:s.jsx(e,{className:"skeleton--th"})})]})}),s.jsx("tbody",{children:Array.from({length:20}).map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx(f,{className:"skeleton-svg--icon"})}),s.jsx("td",{children:s.jsx(e,{className:"skeleton--td-large"})}),s.jsx("td",{children:s.jsx(e,{className:"skeleton--td-medium"})}),s.jsx("td",{children:s.jsx(e,{className:"skeleton--td-small"})}),s.jsx("td",{children:s.jsx(e,{className:"skeleton--action"})})]},r))})]})}),S=[{Header:"Photo",accessor:"photo"},{Header:"Name",accessor:"name"},{Header:"Price",accessor:"price"},{Header:"Stock",accessor:"stock"},{Header:"Action",accessor:"action"}],E=()=>{const[t,r]=n.useState([]),{user:o}=u(a=>a.userReducer),{data:c,isLoading:x,isError:j,error:l,isSuccess:d}=p(o==null?void 0:o._id);n.useEffect(()=>{d&&i.success(c.message,{position:"bottom-center"}),j&&i.error(l.data.message)},[l,d]),n.useEffect(()=>{c&&r([...c.products].reverse().map(a=>({photo:s.jsx("img",{src:a.photos[0],alt:"Product"}),name:a.name,price:a.price,stock:a.stock,action:s.jsx(m,{to:`/admin/product/${a._id}`,children:"Manage"})})))},[c]);const h=b(S,t,"dashboard-product-box","Products",t.length>6)();return s.jsxs("div",{className:"admin-container",children:[s.jsx(N,{}),s.jsx("main",{children:x?s.jsx(g,{}):h}),s.jsx(m,{to:"/admin/product/new",className:"create-product-btn",children:s.jsx(k,{})})]})};export{E as default};
