import{n as C,r as s,a5 as P,w as q,j as e,_ as h}from"./index-BGOJMzyI.js";import{L as D}from"./index-u8q0SdJS.js";import{A as k}from"./AdminSidebar-D7NXFRCM.js";import"./index-BP06CEvy.js";import"./index-9w_9ind6.js";const F=()=>{const{user:n}=C(t=>t.userReducer),[c,x]=s.useState(!1),[o,g]=s.useState(""),[l,j]=s.useState(""),[d,v]=s.useState(1e3),[u,b]=s.useState(1),[p,f]=s.useState(""),[S]=P(),N=q(),a=D("multiple",10,5),w=async t=>{var i;t.preventDefault(),x(!0);try{if(!o||!d||u<0||!l||!p||!a||!a.file)return;const r=new FormData;r.set("name",o),r.set("description",p),r.set("price",d.toString()),r.set("stock",u.toString()),r.set("category",l),a.file.forEach(y=>{r.append("photos",y)});const m=await S({id:n==null?void 0:n._id,formData:r});if("error"in m)throw m.error;h.success((i=m.data)==null?void 0:i.message),N("/admin/product")}catch(r){r&&r.data&&r.data.message?h.error(r.data.message):h.error("An unexpected error occurred")}finally{x(!1)}};return e.jsxs("div",{className:"admin-container",children:[e.jsx(k,{}),e.jsx("main",{className:"product-management",children:e.jsx("article",{children:e.jsxs("form",{onSubmit:w,children:[e.jsx("h2",{children:"New Product"}),e.jsxs("div",{children:[e.jsx("label",{children:"Name"}),e.jsx("input",{required:!0,type:"text",placeholder:"Name",value:o,onChange:t=>g(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{required:!0,placeholder:"Description",value:p,className:"textarea",onChange:t=>f(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Price"}),e.jsx("input",{required:!0,type:"number",placeholder:"Price",value:d,onChange:t=>v(Number(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Stock"}),e.jsx("input",{required:!0,type:"number",placeholder:"Stock",value:u,onChange:t=>b(Number(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Category"}),e.jsx("input",{required:!0,type:"text",placeholder:"eg. laptop, camera etc",value:l,onChange:t=>j(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Photo"}),e.jsx("input",{multiple:!0,required:!0,type:"file",accept:"image/*",onChange:a.changeHandler})]}),a.error&&e.jsx("p",{children:a.error}),a.preview&&e.jsx("div",{className:"image-preview-container",children:a.preview.map((t,i)=>e.jsx("div",{className:"image-preview",children:e.jsx("img",{src:t,alt:"Preview"})},i))}),e.jsx("button",{disabled:c,type:"submit",className:c?"button-disabled":"",children:c?"Creating...":"Create"})]})})})]})};export{F as default};
